

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>4.1 Read Sentinel-1 data processed by ASF &#8212; Cloud-native geospatial data cube workflows with open-source tools</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'sentinel1/nbs/1_read_asf_data';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4.2 Wrangle metadata" href="2_wrangle_metadata.html" />
    <link rel="prev" title="Introduction" href="../s1_intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">ðŸš§ March 2025 - This book is under construction! ðŸš§
</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../introduction.html">
  
  
  
  
  
  
    <p class="title logo__title">Cloud-native geospatial data cube workflows with open-source tools</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 1. Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../intro/1_getting_started.html">1.1 Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/2_learning_objectives.html">1.2 Learning objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/3_open_source_setting.html">1.3 Open source setting</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 2. Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../background/background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background/1_context_motivation.html">2.1 Context &amp; Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background/2_data_cubes.html">2.2 Data cubes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background/3_tutorials_overview.html">2.3 Tutorials overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background/4_tutorial_data.html">2.4 Data used in tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background/5_software.html">2.5 Software and computing environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../background/6_relevant_concepts.html">2.6 Relevant concepts</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 3. ITS_LIVE Tutorial</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../itslive/itslive_intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../itslive/nbs/1_accessing_itslive_s3_data.html">3.1 Accessing cloud-hosted ITS_LIVE data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../itslive/nbs/2_larger_than_memory_data.html">3.2 Working with larger than memory data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../itslive/nbs/3_combining_raster_vector_data.html">3.3 Handling raster and vector data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../itslive/nbs/4_exploratory_data_analysis_single.html">3.4 Exploratory data analysis of a single glacier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../itslive/nbs/5_exploratory_data_analysis_group.html">3.5 Exploratory data analysis of multiple glaciers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 4. Sentinel-1 RTC Tutorial</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../s1_intro.html">Introduction</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">4.1 Read Sentinel-1 data processed by ASF</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_wrangle_metadata.html">4.2 Wrangle metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_asf_exploratory_analysis.html">4.3 Exploratory analysis of ASF S1 imagery</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_read_pc_data.html">4.4 Read Sentinel-1 RTC data from Microsoft Planetary Computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_comparing_s1_rtc_datasets.html">4.5 Comparing Sentinel-1 RTC datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 5. Conclusion</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../conclusion/wrapping_up.html">5.1 Wrapping up</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conclusion/summary.html">5.2 Tutorials summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conclusion/datacubes_revisited.html">5.3 Data Cubes Revisited</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Additional material</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../endmatter/appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../endmatter/other_resources.html">Other resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../endmatter/about_this_book.html">About this book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../endmatter/references.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/e-marshall/cloud-open-source-geospatial-data-cube-workflows" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/e-marshall/cloud-open-source-geospatial-data-cube-workflows/issues/new?title=Issue%20on%20page%20%2Fsentinel1/nbs/1_read_asf_data.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/sentinel1/nbs/1_read_asf_data.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>4.1 Read Sentinel-1 data processed by ASF</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-prepare-to-read-data-into-memory">A. Prepare to read data into memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-lists-of-file-names-and-paths-needed-for-vrt-objects">1) Build lists of file names and paths needed for VRT objects</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-vrt-objects">2) Create VRT objects</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-read-data">B. Read data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#take-a-look-at-chunking">1) Take a look at chunking</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="read-sentinel-1-data-processed-by-asf">
<h1>4.1 Read Sentinel-1 data processed by ASF<a class="headerlink" href="#read-sentinel-1-data-processed-by-asf" title="Permalink to this heading">#</a></h1>
<p>This notebook demonstrates working with Sentinel-1 RTC imagery that has been processed on the <a class="reference external" href="https://docs.asf.alaska.edu/vertex/manual/">ASF On-Demand server</a> and downloaded locally.</p>
<p>The downloaded time series of Sentinel-1 imagery is very large. We demonstrate strategies for reading data of this nature into memory by creating a <em>virtual copy</em> of the data.</p>
<div class="admonition-asf-data-access-options admonition">
<p class="admonition-title">ASF data access options</p>
<p>The steps shown in this notebook involve downloading and extracting large volumes of data. <strong>It is not necessary to do this to follow the rest of the content in the tutorial</strong>. We include the demonstration for the purposes of completeness and to help users who may be helped by this example.</p>
<p>For more information on different options for downloading data locally, see the <a class="reference internal" href="../s1_intro.html#different-ways-to-use-this-tutorial"><span class="std std-ref">Introduction</span></a>.</p>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Outline</label><div class="sd-tab-content docutils">
<p id="content-section-a"><strong><a class="reference internal" href="#a-prepare-to-read-data-into-memory">A. Prepare to read data into memory</a></strong></p>
<ul class="simple">
<li><ol class="arabic simple">
<li><p>Build lists of file names and paths needed for VRT objects</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>Create VRT objects</p></li>
</ol>
</li>
</ul>
<p id="content-section-b"><strong><a class="reference internal" href="#b-read-data">B. Read data</a></strong></p>
<ul class="simple">
<li><ol class="arabic simple">
<li><p>Take a look at chunking</p></li>
</ol>
</li>
</ul>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Learning goals</label><div class="sd-tab-content docutils">
<h4 class="rubric" id="concepts">Concepts</h4>
<ul class="simple">
<li><p>Understand local file storage and create virtual datasets from locally stored files</p></li>
<li><p>Read larger-than-memory data into memory</p></li>
<li><p>Use VRT files to create 3-d Xarray data cubes from stack of 2-d image files</p></li>
</ul>
<h4 class="rubric" id="techniques">Techniques</h4>
<ul class="simple">
<li><p>Create <a class="reference external" href="https://gdal.org/en/stable/drivers/raster/vrt.html">GDAL VRT</a> files.</p></li>
</ul>
<p>TODO add these</p>
</div>
</div>
<p>Expand the next cell to see specific packages used in this notebook and relevant system and version information.</p>
<div class="cell tag_hide-input tag_hide-output docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %xmode minimal</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
</pre></div>
</div>
</div>
</details>
</div>
<hr class="docutils" />
<section id="a-prepare-to-read-data-into-memory">
<h2>A. Prepare to read data into memory<a class="headerlink" href="#a-prepare-to-read-data-into-memory" title="Permalink to this heading">#</a></h2>
<section id="build-lists-of-file-names-and-paths-needed-for-vrt-objects">
<h3>1) Build lists of file names and paths needed for VRT objects<a class="headerlink" href="#build-lists-of-file-names-and-paths-needed-for-vrt-objects" title="Permalink to this heading">#</a></h3>
<p>After the data is extracted from the compressed files, we have a directory containing sub-directories for each Sentinel-1 image acquisition (scene). Within each sub-directory are all of the files associated with that scene. For more information about the files contained in each directory, see this <a class="reference external" href="https://hyp3-docs.asf.alaska.edu/guides/rtc_product_guide/#image-files">section</a> of the ASF Sentinel-1 RTC Product Guide.</p>
<p>The directory should look like the diagram below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
â””â”€â”€ s1_asf_data
    â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_E1E7
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_VH.tif.xml
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_rgb.kmz
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_shape.prj
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7.png.aux.xml
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7.README.md.txt
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_rgb.png.aux.xml
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_rgb.png
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_VV.tif.xml
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7.png
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_rgb.png.xml
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7.png.xml
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_shape.shp
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_VH.tif
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7.log
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_VV.tif
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7.kmz
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_shape.dbf
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_ls_map.tif.xml
    â”‚   â”œâ”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_shape.shx
    â”‚   â””â”€â”€ S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_ls_map.tif
    â””â”€â”€ S1A_IW_20210505T000307_DVP_RTC30_G_gpuned_54B1
        â””â”€â”€ ...
</pre></div>
</div>
<p>To build GDAL VRT files, we need to pass a list of the input datasets. This means that we need to extract the file path to every file associated with each variable (VV, VH and L-S).</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you are following along on your own computer, be sure to specify two things:</p>
<ol class="arabic simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">path_to_rtcs</span></code> to the location of the downloaded files on your own computer.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">timeseries_type</span></code> to <code class="docutils literal notranslate"><span class="pre">'full'</span></code> or <code class="docutils literal notranslate"><span class="pre">'subset'</span></code> depending on if you are using the full time series (103 scenes) or the subset time series (5 scenes).</p></li>
</ol>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Set time series type</span>
<span class="n">timeseries_type</span> <span class="o">=</span> <span class="s2">&quot;full&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default location of the data downloaded in this tutorial (in <code class="docutils literal notranslate"><span class="pre">download_zenodo_data_curl.ipynb</span></code>) is:
<code class="docutils literal notranslate"><span class="pre">../book/sentinel1/data/raster_data/{timeseries_type}_timeseries/'</span></code>. Here, `{timeseries_type} is a stand-in for â€˜fullâ€™ or â€˜subsetâ€™, depending on which data youâ€™re using.</p>
<p>If you prefer to store the data in a different location on your computer, update the <code class="docutils literal notranslate"><span class="pre">path_to_rtcs</span></code> variable below to be the full path of the downloaded data. The path should end with â€˜asf_rtcs.â€™ For example, if you plan to store the data for this tutorial in your Downloads directory, you should specify <code class="docutils literal notranslate"><span class="pre">path_to_rtcs</span></code> like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">path_to_rtcs</span> <span class="o">=</span> <span class="s2">&quot;/home/User/Downloads/asf_rtcs&quot;</span>
</pre></div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">path_to_rtcs</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;../data/raster_data/</span><span class="si">{</span><span class="n">timeseries_type</span><span class="si">}</span><span class="s2">_timeseries/asf_rtcs&quot;</span>
<span class="n">path_to_rtcs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;../data/raster_data/full_timeseries/asf_rtcs&#39;
</pre></div>
</div>
</div>
</div>
<p>Later in the notebook, weâ€™ll also want to point to the parent directory of <code class="docutils literal notranslate"><span class="pre">asf_rtcs</span></code>. To make this easier, we create a variable to do that now:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path_to_rtcs</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
<span class="n">data_path</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;../data/raster_data/full_timeseries&#39;
</pre></div>
</div>
</div>
</div>
<p>Make a list of all scenes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scenes_ls</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path_to_rtcs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Take a look at the first 3</span>
<span class="n">scenes_ls</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7&#39;,
 &#39;S1A_IW_20210911T121356_DVP_RTC30_G_gpuned_3A2A&#39;,
 &#39;S1A_IW_20220329T120546_DVP_RTC30_G_gpuned_FD00&#39;]
</pre></div>
</div>
</div>
</div>
<p>The below function makes a list of all file names across the individual scene directories for VV, VH, ls_map and README files.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">extract_fnames</span><span class="p">(</span><span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">scene_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="c1"># Make list of files within each scene directory in data directory</span>
    <span class="n">scene_files_ls</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">scene_name</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">variable</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;vv&quot;</span><span class="p">,</span> <span class="s2">&quot;vh&quot;</span><span class="p">]:</span>
        <span class="n">scene_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">fname</span> <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">scene_files_ls</span> <span class="k">if</span> <span class="n">fname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">variable</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">.tif&quot;</span><span class="p">)]</span>

    <span class="k">elif</span> <span class="n">variable</span> <span class="o">==</span> <span class="s2">&quot;ls_map&quot;</span><span class="p">:</span>
        <span class="n">scene_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">fname</span> <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">scene_files_ls</span> <span class="k">if</span> <span class="n">fname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;_ls_map.tif&quot;</span><span class="p">)]</span>

    <span class="k">elif</span> <span class="n">variable</span> <span class="o">==</span> <span class="s2">&quot;readme&quot;</span><span class="p">:</span>
        <span class="n">scene_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">scene_files_ls</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;README.md.txt&quot;</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">scene_files</span>
</pre></div>
</div>
</div>
</div>
<p>Below is the output of <code class="docutils literal notranslate"><span class="pre">extract_fnames()</span></code> for files from a single scene directory. Note that <code class="docutils literal notranslate"><span class="pre">os.listdir()</span></code> <strong>does not</strong> preserve the order of the subdirectories as listed on disk. This is okay because we will ensure that the files are sorted in chronological order later.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">extract_fnames</span><span class="p">(</span><span class="n">path_to_rtcs</span><span class="p">,</span> <span class="n">scenes_ls</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;vv&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">extract_fnames</span><span class="p">(</span><span class="n">path_to_rtcs</span><span class="p">,</span> <span class="n">scenes_ls</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;vh&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">extract_fnames</span><span class="p">(</span><span class="n">path_to_rtcs</span><span class="p">,</span> <span class="n">scenes_ls</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;ls_map&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">extract_fnames</span><span class="p">(</span><span class="n">path_to_rtcs</span><span class="p">,</span> <span class="n">scenes_ls</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;readme&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_VV.tif&#39;]
[&#39;S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_VH.tif&#39;]
[&#39;S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_ls_map.tif&#39;]
[&#39;S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7.README.md.txt&#39;]
</pre></div>
</div>
</div>
</div>
<p>We need to attach the filenames to the path of each file so that we end up with a list of the full paths to the VV and VH band imagery, layover-shadow maps and README files. Within this step, we will also add checks to ensure that the process is doing what we want, which is to create lists of filepaths for each character <strong>with the same order across lists</strong> so that we can combine the lists into a multivariate time series. As noted above, it is okay that the lists are not in chronological order, as long as they are in <strong>the same</strong> order across variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">make_filepath_lists</span><span class="p">(</span><span class="n">rtc_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;For a single variable (vv, vh, ls_map or readme), make list of</span>
<span class="sd">    full filepath for each file in time series. Also return dates to ensure</span>
<span class="sd">    extraction happens in correct order for each variable</span>
<span class="sd">    Return tuple with form (filepaths list, dates list)&quot;&quot;&quot;</span>
    <span class="n">scenes_ls</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">rtc_path</span><span class="p">)</span>

    <span class="n">fpaths</span><span class="p">,</span> <span class="n">dates_ls</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">scenes_ls</span><span class="p">)):</span>
        <span class="c1"># Extract filenames of each file of interest</span>
        <span class="n">files_of_interest</span> <span class="o">=</span> <span class="n">extract_fnames</span><span class="p">(</span><span class="n">rtc_path</span><span class="p">,</span> <span class="n">scenes_ls</span><span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="n">variable</span><span class="p">)</span>
        <span class="c1"># Make full path with filename for each variable</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rtc_path</span><span class="p">,</span> <span class="n">scenes_ls</span><span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="n">files_of_interest</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c1"># extract dates to make sure dates are identical across variable lists</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">dates_ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
        <span class="n">fpaths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">fpaths</span><span class="p">,</span> <span class="n">dates_ls</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_filenames_dict</span><span class="p">(</span><span class="n">rtc_path</span><span class="p">,</span> <span class="n">variables_ls</span><span class="p">):</span>
    <span class="n">keys</span><span class="p">,</span> <span class="n">filepaths</span><span class="p">,</span> <span class="n">dates</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">variables_ls</span><span class="p">:</span>
        <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>

        <span class="n">filespaths_list</span><span class="p">,</span> <span class="n">dates_list</span> <span class="o">=</span> <span class="n">make_filepath_lists</span><span class="p">(</span><span class="n">rtc_path</span><span class="p">,</span> <span class="n">variable</span><span class="p">)</span>
        <span class="n">filepaths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filespaths_list</span><span class="p">)</span>
        <span class="n">dates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates_list</span><span class="p">)</span>

    <span class="c1"># make dict of variable names (keys) and associated filepaths</span>
    <span class="n">filepaths_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">filepaths</span><span class="p">))</span>

    <span class="c1"># make sure that dates are identical across all lists</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">lst</span> <span class="o">==</span> <span class="n">dates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">lst</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span>
    <span class="c1"># make sure length of each variable list is the same</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">filepaths_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()])))</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="c1"># make dict of variable names (keys) and associated filepaths</span>
    <span class="n">filepaths_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">filepaths</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">filepaths_dict</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepaths_dict</span> <span class="o">=</span> <span class="n">create_filenames_dict</span><span class="p">(</span><span class="n">path_to_rtcs</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;vv&quot;</span><span class="p">,</span> <span class="s2">&quot;vh&quot;</span><span class="p">,</span> <span class="s2">&quot;ls_map&quot;</span><span class="p">,</span> <span class="s2">&quot;readme&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">filepaths_dict</span></code> has a key for each file type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepaths_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;vv&#39;, &#39;vh&#39;, &#39;ls_map&#39;, &#39;readme&#39;])
</pre></div>
</div>
</div>
</div>
<p>The values are the paths to each file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepaths_dict</span><span class="p">[</span><span class="s2">&quot;vv&quot;</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;../data/raster_data/full_timeseries/asf_rtcs/S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7/S1A_IW_20220214T121353_DVP_RTC30_G_gpuned_51E7_VV.tif&#39;,
 &#39;../data/raster_data/full_timeseries/asf_rtcs/S1A_IW_20210911T121356_DVP_RTC30_G_gpuned_3A2A/S1A_IW_20210911T121356_DVP_RTC30_G_gpuned_3A2A_VV.tif&#39;,
 &#39;../data/raster_data/full_timeseries/asf_rtcs/S1A_IW_20220329T120546_DVP_RTC30_G_gpuned_FD00/S1A_IW_20220329T120546_DVP_RTC30_G_gpuned_FD00_VV.tif&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-vrt-objects">
<h3>2) Create VRT objects<a class="headerlink" href="#create-vrt-objects" title="Permalink to this heading">#</a></h3>
<p>We will be using the <code class="docutils literal notranslate"><span class="pre">gdalbuildvrt</span></code> <a class="reference external" href="https://manpages.ubuntu.com/manpages/bionic/man1/gdalbuildvrt.1.html">command</a>. This command creates a <em>virtual</em> GDAL dataset given a list of other GDAL datasets (the Sentinel-1 scenes). <code class="docutils literal notranslate"><span class="pre">gdalbuildvrt</span></code> can make a VRT that either tiles the listed files into a large spatial mosaic, or places them each in a separate band of the VRT. Because we are dealing with a temporal stack of images we want to use the <code class="docutils literal notranslate"><span class="pre">-separate</span></code> flag to place each file into a band of the VRT. </br></p>
<p>Here is where we use the list of file paths we created above. For each variable, write the list of file paths to a <code class="docutils literal notranslate"><span class="pre">.txt</span></code> file which is then passed to <code class="docutils literal notranslate"><span class="pre">gdalbuildvrt</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_vrt_object</span><span class="p">(</span><span class="n">rtc_parent_data_path</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">fpaths_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to create VRT files for each variable given a</span>
<span class="sd">    list of file paths for that variable.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">variable</span> <span class="o">==</span> <span class="s2">&quot;ls&quot;</span><span class="p">:</span>
        <span class="n">variable</span> <span class="o">=</span> <span class="s2">&quot;ls_map&quot;</span>

    <span class="c1"># Create text files subdir</span>
    <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">rtc_parent_data_path</span><span class="p">,</span> <span class="s2">&quot;txt_files&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Create variable to use when writing file paths to txt file</span>
    <span class="n">fpath_input_txt</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">rtc_parent_data_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;txt_files/s1_</span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">_fpaths.txt&quot;</span><span class="p">)</span>
    <span class="c1"># Create vrt files subdir</span>
    <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">rtc_parent_data_path</span><span class="p">,</span> <span class="s2">&quot;vrt_files&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Specify location of vrt file</span>
    <span class="n">output_vrt_path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">rtc_parent_data_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;vrt_files/s1_stack_</span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">.vrt&quot;</span><span class="p">)</span>
    <span class="c1"># Write file paths to txt file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath_input_txt</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">fpaths_dict</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="o">!</span>gdalbuildvrt<span class="w"> </span>-separate<span class="w"> </span>-input_file_list<span class="w"> </span><span class="o">{</span>fpath_input_txt<span class="o">}</span><span class="w"> </span><span class="o">{</span>output_vrt_path<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">create_vrt_object</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">filepaths_dict</span><span class="p">,</span> <span class="s2">&quot;vv&quot;</span><span class="p">)</span>
<span class="n">create_vrt_object</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">filepaths_dict</span><span class="p">,</span> <span class="s2">&quot;vh&quot;</span><span class="p">)</span>
<span class="n">create_vrt_object</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">filepaths_dict</span><span class="p">,</span> <span class="s2">&quot;ls&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0...10..
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.20...30...40...50...60...70...80...90...100 - done.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>...10...20...30...40...50...60...70...80...90
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>...100 - done.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>...10...20...30...40...50...60...70..
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.80...90...100 - done.
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="b-read-data">
<h2>B. Read data<a class="headerlink" href="#b-read-data" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_vv</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">data_path</span><span class="si">}</span><span class="s1">/vrt_files/s1_stack_vv.vrt&#39;</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,)</span>
<span class="n">ds_vh</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">data_path</span><span class="si">}</span><span class="s1">/vrt_files/s1_stack_vh.vrt&#39;</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,)</span>
<span class="n">ds_ls</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">data_path</span><span class="si">}</span><span class="s1">/vrt_files/s1_stack_ls_map.vrt&#39;</span><span class="p">,</span> <span class="n">chunks</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,)</span>
</pre></div>
</div>
</div>
</div>
<p>Building the <code class="docutils literal notranslate"><span class="pre">VRT</span></code> object assigns every object in the .txt file to a different band. In doing this, we lose the metadata that is associated with the files. The next notebook walks through the steps of reconstructing necessary metadata stored in file names and auxiliary files and attaching it to the Xarray objects read from VRTs.</p>
<section id="take-a-look-at-chunking">
<h3>1) Take a look at chunking<a class="headerlink" href="#take-a-look-at-chunking" title="Permalink to this heading">#</a></h3>
<p>Below is the <code class="docutils literal notranslate"><span class="pre">xr.Dataset</span></code> for a single variable. Click on the stacked cylinders icon on the right end of the â€˜band_dataâ€™ variable to see how the data is chunked.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_ls</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: 'â–º';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: 'â–¼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 96GB
Dimensions:      (band: 103, x: 17452, y: 13379)
Coordinates:
  * band         (band) int64 824B 1 2 3 4 5 6 7 8 ... 97 98 99 100 101 102 103
  * x            (x) float64 140kB 3.833e+05 3.833e+05 ... 9.068e+05 9.068e+05
  * y            (y) float64 107kB 3.309e+06 3.309e+06 ... 2.907e+06 2.907e+06
    spatial_ref  int64 8B ...
Data variables:
    band_data    (band, y, x) float32 96GB dask.array&lt;chunksize=(12, 1536, 1536), meta=np.ndarray&gt;</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-5af27475-bc7e-4563-8166-55b47cb93f70' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-5af27475-bc7e-4563-8166-55b47cb93f70' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>band</span>: 103</li><li><span class='xr-has-index'>x</span>: 17452</li><li><span class='xr-has-index'>y</span>: 13379</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-e5741437-5495-4fc0-8a88-1d846b9c9928' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e5741437-5495-4fc0-8a88-1d846b9c9928' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>band</span></div><div class='xr-var-dims'>(band)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 2 3 4 5 6 ... 99 100 101 102 103</div><input id='attrs-f800436a-9ebe-42ff-ab16-adca8f4e7c3e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f800436a-9ebe-42ff-ab16-adca8f4e7c3e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-daaa527e-4e72-4573-ad08-ec85115ca00e' class='xr-var-data-in' type='checkbox'><label for='data-daaa527e-4e72-4573-ad08-ec85115ca00e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,
        15,  16,  17,  18,  19,  20,  21,  22,  23,  24,  25,  26,  27,  28,
        29,  30,  31,  32,  33,  34,  35,  36,  37,  38,  39,  40,  41,  42,
        43,  44,  45,  46,  47,  48,  49,  50,  51,  52,  53,  54,  55,  56,
        57,  58,  59,  60,  61,  62,  63,  64,  65,  66,  67,  68,  69,  70,
        71,  72,  73,  74,  75,  76,  77,  78,  79,  80,  81,  82,  83,  84,
        85,  86,  87,  88,  89,  90,  91,  92,  93,  94,  95,  96,  97,  98,
        99, 100, 101, 102, 103])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.833e+05 3.833e+05 ... 9.068e+05</div><input id='attrs-16582ef9-19c0-4df2-9560-8ff60d6ed9f6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-16582ef9-19c0-4df2-9560-8ff60d6ed9f6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-336dc275-53b0-4594-a6b1-b8a0302e303f' class='xr-var-data-in' type='checkbox'><label for='data-336dc275-53b0-4594-a6b1-b8a0302e303f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([383265., 383295., 383325., ..., 906735., 906765., 906795.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.309e+06 3.309e+06 ... 2.907e+06</div><input id='attrs-35d0c876-ec91-4050-88b1-b99e30a26703' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-35d0c876-ec91-4050-88b1-b99e30a26703' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c3aa53ac-e403-47d4-9777-76d90b9345af' class='xr-var-data-in' type='checkbox'><label for='data-c3aa53ac-e403-47d4-9777-76d90b9345af' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([3308715., 3308685., 3308655., ..., 2907435., 2907405., 2907375.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-e2daf0e0-9a75-4785-bf9b-ff5591c32242' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e2daf0e0-9a75-4785-bf9b-ff5591c32242' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b4141c68-7bc0-461b-9ef8-2c21059f8867' class='xr-var-data-in' type='checkbox'><label for='data-b4141c68-7bc0-461b-9ef8-2c21059f8867' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 45N&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,87],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32645&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>projected_crs_name :</span></dt><dd>WGS 84 / UTM zone 45N</dd><dt><span>grid_mapping_name :</span></dt><dd>transverse_mercator</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>0.0</dd><dt><span>longitude_of_central_meridian :</span></dt><dd>87.0</dd><dt><span>false_easting :</span></dt><dd>500000.0</dd><dt><span>false_northing :</span></dt><dd>0.0</dd><dt><span>scale_factor_at_central_meridian :</span></dt><dd>0.9996</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 45N&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,87],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32645&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>383250.0 30.0 0.0 3308730.0 0.0 -30.0</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=int64]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cb1d353e-3e5b-47cc-8f92-50b7959b813c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-cb1d353e-3e5b-47cc-8f92-50b7959b813c' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>band_data</span></div><div class='xr-var-dims'>(band, y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(12, 1536, 1536), meta=np.ndarray&gt;</div><input id='attrs-c2827189-09d6-4607-8403-a5464d347b3c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c2827189-09d6-4607-8403-a5464d347b3c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-07f7a351-5b86-4c44-b8ef-a5dfade9c8b1' class='xr-var-data-in' type='checkbox'><label for='data-07f7a351-5b86-4c44-b8ef-a5dfade9c8b1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 89.59 GiB </td>
                        <td> 108.00 MiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (103, 13379, 17452) </td>
                        <td> (12, 1536, 1536) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 972 chunks in 2 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="194" height="156" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="10" y1="10" x2="24" y2="25" />
  <line x1="10" y1="21" x2="24" y2="36" />
  <line x1="10" y1="31" x2="24" y2="46" />
  <line x1="10" y1="42" x2="24" y2="57" />
  <line x1="10" y1="52" x2="24" y2="67" />
  <line x1="10" y1="63" x2="24" y2="78" />
  <line x1="10" y1="73" x2="24" y2="88" />
  <line x1="10" y1="84" x2="24" y2="99" />
  <line x1="10" y1="91" x2="24" y2="106" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="91" style="stroke-width:2" />
  <line x1="11" y1="1" x2="11" y2="93" />
  <line x1="13" y1="3" x2="13" y2="95" />
  <line x1="15" y1="5" x2="15" y2="97" />
  <line x1="16" y1="6" x2="16" y2="98" />
  <line x1="18" y1="8" x2="18" y2="100" />
  <line x1="20" y1="10" x2="20" y2="102" />
  <line x1="22" y1="12" x2="22" y2="104" />
  <line x1="23" y1="13" x2="23" y2="105" />
  <line x1="24" y1="14" x2="24" y2="106" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 24.9485979497544,14.948597949754403 24.9485979497544,106.94263874737072 10.0,91.99404079761632" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="130" y2="0" style="stroke-width:2" />
  <line x1="11" y1="1" x2="131" y2="1" />
  <line x1="13" y1="3" x2="133" y2="3" />
  <line x1="15" y1="5" x2="135" y2="5" />
  <line x1="16" y1="6" x2="136" y2="6" />
  <line x1="18" y1="8" x2="138" y2="8" />
  <line x1="20" y1="10" x2="140" y2="10" />
  <line x1="22" y1="12" x2="142" y2="12" />
  <line x1="23" y1="13" x2="143" y2="13" />
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="24" y2="14" style="stroke-width:2" />
  <line x1="20" y1="0" x2="35" y2="14" />
  <line x1="31" y1="0" x2="46" y2="14" />
  <line x1="41" y1="0" x2="56" y2="14" />
  <line x1="52" y1="0" x2="67" y2="14" />
  <line x1="62" y1="0" x2="77" y2="14" />
  <line x1="73" y1="0" x2="88" y2="14" />
  <line x1="83" y1="0" x2="98" y2="14" />
  <line x1="94" y1="0" x2="109" y2="14" />
  <line x1="105" y1="0" x2="120" y2="14" />
  <line x1="115" y1="0" x2="130" y2="14" />
  <line x1="126" y1="0" x2="141" y2="14" />
  <line x1="130" y1="0" x2="144" y2="14" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 130.0,0.0 144.9485979497544,14.948597949754403 24.9485979497544,14.948597949754403" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="24" y1="14" x2="144" y2="14" style="stroke-width:2" />
  <line x1="24" y1="25" x2="144" y2="25" />
  <line x1="24" y1="36" x2="144" y2="36" />
  <line x1="24" y1="46" x2="144" y2="46" />
  <line x1="24" y1="57" x2="144" y2="57" />
  <line x1="24" y1="67" x2="144" y2="67" />
  <line x1="24" y1="78" x2="144" y2="78" />
  <line x1="24" y1="88" x2="144" y2="88" />
  <line x1="24" y1="99" x2="144" y2="99" />
  <line x1="24" y1="106" x2="144" y2="106" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="24" y1="14" x2="24" y2="106" style="stroke-width:2" />
  <line x1="35" y1="14" x2="35" y2="106" />
  <line x1="46" y1="14" x2="46" y2="106" />
  <line x1="56" y1="14" x2="56" y2="106" />
  <line x1="67" y1="14" x2="67" y2="106" />
  <line x1="77" y1="14" x2="77" y2="106" />
  <line x1="88" y1="14" x2="88" y2="106" />
  <line x1="98" y1="14" x2="98" y2="106" />
  <line x1="109" y1="14" x2="109" y2="106" />
  <line x1="120" y1="14" x2="120" y2="106" />
  <line x1="130" y1="14" x2="130" y2="106" />
  <line x1="141" y1="14" x2="141" y2="106" />
  <line x1="144" y1="14" x2="144" y2="106" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="24.9485979497544,14.948597949754403 144.9485979497544,14.948597949754403 144.9485979497544,106.94263874737072 24.9485979497544,106.94263874737072" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="84.948598" y="126.942639" font-size="1.0rem" font-weight="100" text-anchor="middle" >17452</text>
  <text x="164.948598" y="60.945618" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,164.948598,60.945618)">13379</text>
  <text x="7.474299" y="119.468340" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,7.474299,119.468340)">103</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-35da5357-460d-471c-9aa7-981b54b61cb4' class='xr-section-summary-in' type='checkbox'  ><label for='section-35da5357-460d-471c-9aa7-981b54b61cb4' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>band</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-48f8f8d1-db74-427d-b0c2-533aea8b121c' class='xr-index-data-in' type='checkbox'/><label for='index-48f8f8d1-db74-427d-b0c2-533aea8b121c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,
       ...
        94,  95,  96,  97,  98,  99, 100, 101, 102, 103],
      dtype=&#x27;int64&#x27;, name=&#x27;band&#x27;, length=103))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-a044fad0-352e-414b-a467-dc905ce53e28' class='xr-index-data-in' type='checkbox'/><label for='index-a044fad0-352e-414b-a467-dc905ce53e28' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([383265.0, 383295.0, 383325.0, 383355.0, 383385.0, 383415.0, 383445.0,
       383475.0, 383505.0, 383535.0,
       ...
       906525.0, 906555.0, 906585.0, 906615.0, 906645.0, 906675.0, 906705.0,
       906735.0, 906765.0, 906795.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=17452))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-fb61a42f-05ee-4b30-bd44-5e5d08e28694' class='xr-index-data-in' type='checkbox'/><label for='index-fb61a42f-05ee-4b30-bd44-5e5d08e28694' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([3308715.0, 3308685.0, 3308655.0, 3308625.0, 3308595.0, 3308565.0,
       3308535.0, 3308505.0, 3308475.0, 3308445.0,
       ...
       2907645.0, 2907615.0, 2907585.0, 2907555.0, 2907525.0, 2907495.0,
       2907465.0, 2907435.0, 2907405.0, 2907375.0],
      dtype=&#x27;float64&#x27;, name=&#x27;y&#x27;, length=13379))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f2f0e60f-3714-4fce-9d87-ee0403ba3b2b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f2f0e60f-3714-4fce-9d87-ee0403ba3b2b' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<p>Depending on your use-case, you may want to adjust the chunking of the object. For example, if you are interested in analyzing variability along the temporal dimension, it might make sense to re-chunk the dataset so that operations along the that dimension are more easily parallelized. For more detail, see the <a class="reference internal" href="../../background/6_relevant_concepts.html#term-Chunking"><span class="xref std std-term">chunking</span></a> discussion in <a class="reference internal" href="../../background/6_relevant_concepts.html"><span class="std std-doc">Relevant Concepts</span></a> and the <a class="reference external" href="https://docs.xarray.dev/en/stable/user-guide/dask.html">Parallel Computing with Dask</a> section of the Xarray documentation.</p>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading">#</a></h2>
<p>This notebook demonstrated reading large data into memory by creating a virtual dataset that references that full dataset without directly reading it. However, we also saw that reading the data in this way produces an object that lacks important metadata. The next notebook will go through the steps of locating and adding relevant metadata to the backscatter data cubes read in this notebook.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./sentinel1/nbs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../s1_intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction</p>
      </div>
    </a>
    <a class="right-next"
       href="2_wrangle_metadata.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">4.2 Wrangle metadata</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-prepare-to-read-data-into-memory">A. Prepare to read data into memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-lists-of-file-names-and-paths-needed-for-vrt-objects">1) Build lists of file names and paths needed for VRT objects</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-vrt-objects">2) Create VRT objects</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-read-data">B. Read data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#take-a-look-at-chunking">1) Take a look at chunking</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Emma Marshall
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>