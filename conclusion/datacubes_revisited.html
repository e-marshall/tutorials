

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>5.3 Data Cubes Revisited &#8212; Cloud-native geospatial data cube workflows with open-source tools</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'conclusion/datacubes_revisited';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Appendix" href="../endmatter/appendix.html" />
    <link rel="prev" title="5.2 Tutorials summary" href="summary.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">ðŸš§ March 2025 - This book is under construction! ðŸš§
</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../introduction.html">
  
  
  
  
  
  
    <p class="title logo__title">Cloud-native geospatial data cube workflows with open-source tools</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 1. Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro/1_getting_started.html">1.1 Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/2_learning_objectives.html">1.2 Learning objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/3_open_source_setting.html">1.3 Open source setting</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 2. Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../background/background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/1_context_motivation.html">2.1 Context &amp; Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/2_data_cubes.html">2.2 Data cubes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/3_tutorials_overview.html">2.3 Tutorials overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/4_tutorial_data.html">2.4 Data used in tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/5_software.html">2.5 Software and computing environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/6_relevant_concepts.html">2.6 Relevant concepts</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 3. ITS_LIVE Tutorial</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../itslive/itslive_intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../itslive/nbs/1_accessing_itslive_s3_data.html">3.1 Accessing cloud-hosted ITS_LIVE data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../itslive/nbs/2_larger_than_memory_data.html">3.2 Working with larger than memory data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../itslive/nbs/3_combining_raster_vector_data.html">3.3 Handling raster and vector data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../itslive/nbs/4_exploratory_data_analysis_single.html">3.4 Exploratory data analysis of a single glacier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../itslive/nbs/5_exploratory_data_analysis_group.html">4.5 Comparing Sentinel-1 RTC datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 4. Sentinel-1 RTC Tutorial</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../sentinel1/s1_intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sentinel1/nbs/1_read_asf_data.html">4.1 Read Sentinel-1 data processed by ASF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sentinel1/nbs/2_wrangle_metadata.html">4.2 Wrangle metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sentinel1/nbs/3_asf_exploratory_analysis.html">4.3 Exploratory analysis of ASF S1 imagery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sentinel1/nbs/4_read_pc_data.html">4.4 Read Sentinel-1 RTC data from Microsoft Planetary Computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sentinel1/nbs/5_comparing_s1_rtc_datasets.html">4.5 Comparing Sentinel-1 RTC datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 5. Conclusion</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="wrapping_up.html">5.1 Wrapping up</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary.html">5.2 Tutorials summary</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">5.3 Data Cubes Revisited</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Additional material</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../endmatter/appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../endmatter/other_resources.html">Other resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../endmatter/about_this_book.html">About this book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../endmatter/references.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/e-marshall/cloud-open-source-geospatial-data-cube-workflows" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/e-marshall/cloud-open-source-geospatial-data-cube-workflows/issues/new?title=Issue%20on%20page%20%2Fconclusion/datacubes_revisited.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/conclusion/datacubes_revisited.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>5.3 Data Cubes Revisited</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tidying-guidelines-for-xarray">Tidying guidelines for Xarray</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="data-cubes-revisited">
<h1>5.3 Data Cubes Revisited<a class="headerlink" href="#data-cubes-revisited" title="Permalink to this heading">#</a></h1>
<p>In this book, we saw a range of real-world datasets and the steps required to prepare them for analysis. Several guiding principles for assembling and using analysis-ready data cubes in Xarray can be drawn from these examples.</p>
<p>Letâ€™s first return to the Xarray building blocks described in the background <a class="reference internal" href="../background/2_data_cubes.html"><span class="std std-doc">section</span></a>; we can now provide more-detailed definitions of what they are and how they should be used:</p>
<div class="admonition-dissecting-data-cubes admonition">
<p class="admonition-title">Dissecting data cubes</p>
<p><strong><a class="reference external" href="https://docs.xarray.dev/en/latest/user-guide/terminology.html#term-Dimension">Dimensions</a></strong> - What do the axes of the data represent? This should be the set of dimensions. Frequently, <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">time)</span></code>. Dimensions are orthogonal to each other.<br />
<strong><a class="reference external" href="https://docs.xarray.dev/en/latest/user-guide/terminology.html#term-Dimension-coordinate">Dimensional coordinate variables</a></strong> - Typically 1-d arrays describing the range and resolution of the data along each dimension. Think of this as axes tick labels on a plot.
<strong><a class="reference external" href="https://docs.xarray.dev/en/latest/user-guide/terminology.html#term-Non-dimension-coordinate">Non-dimensional coordinate variables</a></strong> - Metadata about the physical observable that varies along one or more dimensions. These can be 1-d up to n-d where n is the length of <code class="docutils literal notranslate"><span class="pre">.dims</span></code>.<br />
<strong><a class="reference external" href="https://docs.xarray.dev/en/latest/user-guide/terminology.html#term-Variable">Data variables</a></strong> - Physical observable(s) whose values are known at every point on the grid formed by the dimensions.
<strong>Attributes</strong> - Metadata that can be assigned to a given <code class="docutils literal notranslate"><span class="pre">xr.Dataset</span></code> or <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> that is <em><strong>invariant</strong></em> along that objectâ€™s dimensions.</p>
</div>
<hr class="docutils" />
<section id="tidying-guidelines-for-xarray">
<h2>Tidying guidelines for Xarray<a class="headerlink" href="#tidying-guidelines-for-xarray" title="Permalink to this heading">#</a></h2>
<p>At the beginning of the book, we also discussed â€˜tidy dataâ€™ as its defined for tabular data. Now that weâ€™ve worked through a number of examples preparing n-dimensional array data for analysis, we can enumerate a few best practices that apply in most cases when tidying data with Xarray. The guiding question when thinking about <em>how</em> to tidy data is always:</p>
<p><strong>How can this data be structured to simplify subsequent analysis?</strong></p>
<p>Keep in mind that one organization of the data need not make all analyses equally ergonomic. We must be open to transforming the data between equivalent representations, depending on the task at hand.</p>
<p>Here are a few guidelines:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Variables</label><div class="sd-tab-content docutils">
<h3 class="rubric" id="data-variables">Data variables</h3>
<p>These are the measurements or estimates of your dataset. If there are multiple independent measurements in the dataset, they should be stored as data variables in a <code class="docutils literal notranslate"><span class="pre">xr.Dataset</span></code>, if the data are univariate, use a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html"><code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code></a></p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Guiding Question</strong></p></td>
<td class="text-left"><p>What physical observable(s) is my dataset measuring?</p></td>
</tr>
</tbody>
</table>
</div>
<h4 class="rubric" id="relevant-examples">Relevant examples</h4>
<p>In <a class="reference internal" href="../sentinel1/nbs/3_asf_exploratory_analysis.html"><span class="std std-doc">Sentinel-1, notebook 3 - Exploratory analysis of ASF data</span></a>, we saw examples of treating multiple backscatter polarizations as data variables versus a single variable along a <code class="docutils literal notranslate"><span class="pre">band</span></code> dimension. We can convert between the two representations using <code class="docutils literal notranslate"><span class="pre">Dataset.to_array</span></code> and <code class="docutils literal notranslate"><span class="pre">DataArray.to_dataset</span></code>.</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Takeaway</strong></p></td>
<td class="text-left"><p>Data variables should be independent of one another.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Dimensions</label><div class="sd-tab-content docutils">
<h3 class="rubric" id="dimensions">Dimensions</h3>
<p>Many earth observation data cubes have the same core structure of <code class="docutils literal notranslate"><span class="pre">(x,y,time)</span></code> or <code class="docutils literal notranslate"><span class="pre">(longitude,</span> <span class="pre">latitude,</span> <span class="pre">time)</span></code> dimensions. However, the optimal structure for a given dataset depends on its intended use-case, and there is considerable room to reshape data cubes to fit specific analytical needs.<br />
In these situations, a guiding question could be:</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Guiding Question</strong></p></td>
<td class="text-left"><p>What â€˜shapeâ€™ will help me answer the questions I have about this dataset?</p></td>
</tr>
</tbody>
</table>
</div>
<h4 class="rubric" id="id1">Relevant examples</h4>
<h5 class="rubric" id="expanding-dimensions-v-adding-variables">1. Expanding dimensions v. adding variables</h5>
<ul class="simple">
<li><p>Formatting the Sentinel-1 backscatter cube to have <code class="docutils literal notranslate"><span class="pre">vv</span></code> and <code class="docutils literal notranslate"><span class="pre">vh</span></code> data variables versus <code class="docutils literal notranslate"><span class="pre">band</span></code> dimension with the following coordinate array: <code class="docutils literal notranslate"><span class="pre">('band',</span> <span class="pre">['vh','vv'])</span></code> (<a class="reference internal" href="../sentinel1/nbs/3_asf_exploratory_analysis.html"><span class="std std-doc"><em>Sentinel-1 tutorial, notebook 3 - exploratory analysis of ASF data</em></span></a>).</p>
<ul>
<li><p>If you are only interested in a single polarization of the dataset or looking at backscatter from different polarizations independent of one another, treating backscatter from each polarization as a  _<em>data variable</em> is suitable and maybe even optimal; it can be simpler to perform operations on a single variable rather than an entire dimension.</p></li>
<li><p>If you are interested in examining backscatter across different polarizations, the different polarizations are most appropriately represented as elements of a dimension.</p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Takeaway</strong></p></td>
<td class="text-left"><p>Structure your data cubeâ€™s dimensions so that data variables are independent of one another.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are working with a dataset where information about how the variables relate to one another is included in the variable name (e.g. a year, or a band wavelength), this is a sign that there should be an additional dimension.</p>
</div>
<h5 class="rubric" id="compare-two-datasets-by-combining-them-into-a-single-cube-with-an-additional-dimension">2. Compare two datasets by combining them into a single cube with an additional dimension</h5>
<ul class="simple">
<li><p>To compare data from different satellites within the ITS_LIVE dataset, we create a new data cube with a <code class="docutils literal notranslate"><span class="pre">'sensor'</span></code> dimension (<a class="reference internal" href="../itslive/nbs/4_exploratory_data_analysis_single.html"><span class="std std-doc"><em>ITS_LIVE tutorial, notebook 4 - exploratory analysis of a single glacier</em></span></a>*).</p></li>
<li><p>Adding <code class="docutils literal notranslate"><span class="pre">source</span></code> dimension when comparing ASF and PC backscatter datasets (<a class="reference internal" href="../sentinel1/nbs/5_comparing_s1_rtc_datasets.html"><span class="std std-doc"><em>Sentinel-1 tutorial, notebook 5 - comparing backscatter datasets</em></span></a>).</p>
<ul>
<li><p>In this example, the goal of our analysis changes from observing backscatter to observing how measurements of backscatter from two processing pipelines differ from one another. This implies a different shape of the data that is relevant to this question; the appropriate dimensions change from <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">time,</span> <span class="pre">band)</span></code> to <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">time,</span> <span class="pre">band,</span> <span class="pre">source)</span></code>.</p></li>
<li><p>Adding a source dimension letâ€™s us index the combined dataset by â€˜sourceâ€™ and compare the two â€˜sourceâ€™ elements on a common grid and scale.</p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Takeaway</strong></p></td>
<td class="text-left"><p>Consider either concatenating two cubes along a new dimension, or splitting a dimension in to multiple cubes. One approach may be more ergonomic compared to the other depending on the problem at hand.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
Coordinates</label><div class="sd-tab-content docutils">
<h2 class="rubric" id="dimensional-non-dimensional-coordinate-variables">Dimensional &amp; non-dimensional coordinate variables</h2>
<p>A dataset must have a <strong>dimensional coordinate</strong> variable for each dimension in <code class="docutils literal notranslate"><span class="pre">ds.dims</span></code>. Additional <strong>non-dimensional coordinate variables</strong> should be added when relevant metadata varies over dimension(s) of the dataset.</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Guiding Question</strong></p></td>
<td class="text-left"><p>What are the dimensions of the dataset? What information (separate from the measurement variable) varies over those dimensions?</p></td>
</tr>
</tbody>
</table>
</div>
<h4 class="rubric" id="id2">Relevant examples</h4>
<h5 class="rubric" id="handling-time-varying-metadata">1. Handling time-varying metadata</h5>
<ul class="simple">
<li><p>Metadata that varies over <code class="docutils literal notranslate"><span class="pre">(time)</span></code> should be stored as coordinate variables along the <code class="docutils literal notranslate"><span class="pre">time</span></code> dimension (e.g. whether a scene was taken during an ascending or descending pass).</p></li>
<li><p>Metadata that varies over <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code>, and <code class="docutils literal notranslate"><span class="pre">y</span></code> should be coordinate variables that exist along those dimensions.</p>
<ul>
<li><p><em><a class="reference internal" href="../sentinel1/nbs/2_wrangle_metadata.html"><span class="std std-doc">Sentinel-1 tutorial, metadata wrangling notebook</span></a></em></p></li>
</ul>
</li>
</ul>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Takeaway</strong></p></td>
<td class="text-left"><p>Assign metadata that varies along a given dimension as a non-dimensional coordinate of that dimension.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
Attributes</label><div class="sd-tab-content docutils">
<h3 class="rubric" id="attributes">Attributes</h3>
<p><code class="docutils literal notranslate"><span class="pre">attrs</span></code> can be assigned to the dataset as a whole or any of the <code class="docutils literal notranslate"><span class="pre">xr.DataArray</span></code> objects within it. Many fields have their own conventions for attribute metadata, e.g. Climate &amp; Forecast Conventions (CF).</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Guiding Question</strong></p></td>
<td class="text-left"><p>Does a piece of attribute information apply to this <em>entire</em> object (e.g. a data variable, a coordinate variable, or a dataset)? If so, it should be stored as an attribute of that object. Attributes must conform to an existing standard if possible.</p></td>
</tr>
</tbody>
</table>
</div>
<p>and</p>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Guiding Question</strong></p></td>
<td class="text-left"><p>What tools exist that can help perform the operations that I need to with this dataset? How must attribute data be stored to use them?</p></td>
</tr>
</tbody>
</table>
</div>
<h4 class="rubric" id="id3">Relevant examples</h4>
<h5 class="rubric" id="attributes-must-conform-to-accepted-metadata-conventions-like-cf-and-stac-in-order-to-take-advantage-of-tools-built-off-these-specifications">1. Attributes must conform to accepted metadata conventions like CF and STAC in order to take advantage of tools built off these specifications</h5>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">cf_xarray</span></code> with appropriately-formatted metadata enables more streamlined access to and interpretation of metadata (<em><a class="reference internal" href="../itslive/nbs/1_accessing_itslive_s3_data.html"><span class="std std-doc">ITS_LIVE tutorial, data access notebook</span></a></em>)</p></li>
<li><p>Having appropriate CF metadata enables reading and writing vector data cubes to disk
(<em><a class="reference internal" href="../itslive/nbs/5_exploratory_data_analysis_group.html"><span class="std std-doc">ITS_LIVE tutorial, exploratory analysis of a group of glaciers notebook</span></a></em>)</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p></p></th>
<th class="text-left head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><strong>Takeaway</strong></p></td>
<td class="text-left"><p>Wherever possible, use metadata that conforms to existing conventions.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-4">
Collections</label><div class="sd-tab-content docutils">
<h3 class="rubric" id="collections">Collections</h3>
<p>Independent objects should be represented as unique <code class="docutils literal notranslate"><span class="pre">xr.Datasets</span></code> (if multivariate) or <code class="docutils literal notranslate"><span class="pre">xr.DataArrays</span></code> (if univariate). If you are working with a collection of independent objects but would like to organize, keep track of, and work with them in relation to one another, use <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataTree.html"><code class="docutils literal notranslate"><span class="pre">xr.DataTree</span></code></a> to assign hierarchical relationships among objects.</p>
<h4 class="rubric" id="id4">Relevant examples</h4>
<h5 class="rubric" id="apply-a-function-to-every-object-in-a-collection-with-xr-datatree-map-over-datasets">1. Apply a function to every object in a collection with <code class="docutils literal notranslate"><span class="pre">xr.DataTree.map_over_datasets()</span></code></h5>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">xr.DataTree</span></code> to apply a function to each dataset within a a collection in order to make a new data cube that includes all objects along an expanded dimension (<em><a class="reference internal" href="../itslive/nbs/4_exploratory_data_analysis_single.html"><span class="std std-doc">ITS_LIVE tutorial, notebook 4 - exploratory analysis of a single glacier notebook</span></a>).</em></p></li>
</ul>
<h5 class="rubric" id="if-youre-working-with-a-collection-of-objects-that-can-be-defined-by-vector-geometries-a-vector-data-cube-may-be-an-appropriate-way-to-represent-the-data">2. If youâ€™re working with a collection of objects that can be defined by vector geometries, a vector data cube may be an appropriate way to represent the data</h5>
<ul class="simple">
<li><p>Use <a class="reference external" href="https://xvec.readthedocs.io/en/stable/">Xvec</a> to build a vector data cube that has a <code class="docutils literal notranslate"><span class="pre">'geometry'</span></code> dimension; each element of the geometry dimension is a cube that varies over the other dimensions of the cube (frequently <code class="docutils literal notranslate"><span class="pre">time</span></code>) (<em><a class="reference internal" href="../itslive/nbs/5_exploratory_data_analysis_group.html"><span class="std std-doc">ITS_LIVE tutorial, exploratory analysis of a group of glaciers notebook</span></a>.</em>)</p></li>
</ul>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./conclusion"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="summary.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">5.2 Tutorials summary</p>
      </div>
    </a>
    <a class="right-next"
       href="../endmatter/appendix.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Appendix</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tidying-guidelines-for-xarray">Tidying guidelines for Xarray</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Emma Marshall
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>